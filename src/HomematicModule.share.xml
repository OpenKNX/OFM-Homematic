<?xml version="1.0" encoding="utf-8"?>
<?xml-model href="../../Organization/knxprod-support/knx_project_20/knx-editor.xsd" type="application/xml" schematypens="http://www.w3.org/2001/XMLSchema"?>
<KNX xmlns:op="http://github.com/OpenKNX/OpenKNXproducer" xmlns="http://knx.org/xml/project/20" CreatedBy="KNX MT" ToolVersion="5.1.255.16695">
  <op:config name="%HMG_NumChannelsDefault%" value="2" />

  <ManufacturerData>
    <Manufacturer>
      <ApplicationPrograms>
        <ApplicationProgram>
          <Static>
            <ParameterTypes>
              <!-- Number of channels (module specific) -->
              <ParameterType Id="%AID%_PT-HMGNumChannels" Name="HMGNumChannels">
                <TypeNumber SizeInBit="8" Type="unsignedInt" minInclusive="1" maxInclusive="%N%" />
              </ParameterType>

              <ParameterType Id="%AID%_PT-Host" Name="Host">
                <TypeText SizeInBit="640" />
              </ParameterType> 

              <ParameterType Id="%AID%_PT-HostPort" Name="HostPort">
                <TypeNumber SizeInBit="16" Type="unsignedInt" minInclusive="0" maxInclusive="65535" />
              </ParameterType>

              <!-- serialNumber AAA1234567 -->
              <ParameterType Id="%AID%_PT-DeviceSerialNumber" Name="DeviceSerialNumber">
                <TypeText SizeInBit="80" />
              </ParameterType>

              <ParameterType Id="%AID%_PT-HmDevType" Name="HmDevType">
                <TypeRestriction Base="Value" SizeInBit="1">
                  <Enumeration Id="%ENID%" Value="0" Text="inaktiv"                              />
                  <Enumeration Id="%ENID%" Value="1" Text="HM-CC-RT-DN (Funk-Thermostat)"        />
                </TypeRestriction>
              </ParameterType>
              <!--
              <ParameterType Id="%AID%_PT-DiagnoseAccess" Name="DiagnoseAccess">
                <TypeRestriction Base="Value" SizeInBit="1">
                  <Enumeration Id="%ENID%" Value="0" Text="nur Status-Ausgabe"        />
                  <Enumeration Id="%ENID%" Value="1" Text="Steuerung erlauben"        />
                </TypeRestriction>
              </ParameterType>
              -->
              

              <ParameterType Id="%AID%_PT-DocText255" Name="DocumentationText255Char">
                <TypeText SizeInBit="2040" />
              </ParameterType>              

              <!-- channel master switch -->
              <ParameterType Id="%AID%_PT-ChannelSwitchMaster" Name="ChannelSwitchMaster">
                <TypeRestriction Base="Value" SizeInBit="2">
                  <Enumeration Text="inaktiv"                                                Value="0" Id="%ENID%" /><!-- 0b00 -->
                  <Enumeration Text="aktiv"                                                  Value="1" Id="%ENID%" /><!-- 0b01 -->
                  <Enumeration Text="temporär inaktiv (KOs/Konfiguration sichtbar)"          Value="2" Id="%ENID%" /><!-- 0b10 -->
                </TypeRestriction>
              </ParameterType>


            </ParameterTypes>
            <Parameters>
              <Union SizeInBit="688"><Memory CodeSegment="%MID%" Offset="0" BitOffset="0" />
                <Parameter Id="%AID%_UP-%TT%00001"   Name="VisibleChannels"          ParameterType="%AID%_PT-HMGNumChannels"   Offset="0"  BitOffset="0"  Text="Verfügbare Kanäle"                     Value="%HMG_NumChannelsDefault%"    SuffixText=" von %N%" />
                <Parameter Id="%AID%_UP-%TT%00002"   Name="a%C%StartupDelayBase"     ParameterType="%AID%_PT-DelayBase"        Offset="1"  BitOffset="0"  Text="Einschaltverzögerung Zeitbasis"        Value="0"                                                 />
                <Parameter Id="%AID%_UP-%TT%00003"   Name="a%C%StartupDelayTime"     ParameterType="%AID%_PT-DelayTime"        Offset="1"  BitOffset="2"  Text="Einschaltverzögerung Zeit"             Value="1"                                                 />
                <Parameter Id="%AID%_UP-%TT%00004"   Name="Host"                     ParameterType="%AID%_PT-Host"             Offset="3"  BitOffset="0"  Text="Host"                                  Value="0"                                                 />
                <!-- 1 byte free after string -->
                <Parameter Id="%AID%_UP-%TT%00005"   Name="Port"                     ParameterType="%AID%_PT-HostPort"         Offset="84" BitOffset="0"  Text="Port"                                  Value="2001"                                              />
             </Union>
            </Parameters>
            <ParameterRefs>
              <ParameterRef Id="%AID%_UP-%TT%00001_R-%TT%0000101" RefId="%AID%_UP-%TT%00001" />
              <ParameterRef Id="%AID%_UP-%TT%00002_R-%TT%0000201" RefId="%AID%_UP-%TT%00002" />
              <ParameterRef Id="%AID%_UP-%TT%00003_R-%TT%0000301" RefId="%AID%_UP-%TT%00003" />
              <ParameterRef Id="%AID%_UP-%TT%00004_R-%TT%0000401" RefId="%AID%_UP-%TT%00004" />
              <ParameterRef Id="%AID%_UP-%TT%00005_R-%TT%0000501" RefId="%AID%_UP-%TT%00005" />
            </ParameterRefs>
            <ComObjectTable>
              <!-- TODO ko for connection state -->
            </ComObjectTable>
            <ComObjectRefs>
            </ComObjectRefs>
          </Static>
          <Dynamic>
            <Channel Name="HmgChannel" Text="Homematic" Number="%TT%" Id="%AID%_CH-%TT%" Icon="crop-square" >
              <ParameterBlock Name="HMgInfo" Text="Allgemein" Id="%AID%_PB-nnn" Icon="cog-outline"><!-- HelpContext="HMG-Dokumentation" -->

                <ParameterSeparator Id="%AID%_PS-nnn" Text="Homematic" UIHint="Headline" />
                <ParameterSeparator Id="%AID%_PS-nnn" Text="Version: %ModuleVersion%"  />

                <ParameterSeparator Id="%AID%_PS-nnn" Text="" UIHint="HorizontalRuler" />

                <ParameterSeparator Id="%AID%_PS-nnn" Text="Kanalauswahl" UIHint="Headline" />
                <ParameterRefRef RefId="%AID%_UP-%TT%00001_R-%TT%0000101" /><!-- HelpContext="HMG-Kanalauswahl"  -->

                <ParameterSeparator Id="%AID%_PS-nnn" Text="" UIHint="HorizontalRuler" />

                <!-- ChannelDelay Delay pattern, as used in LOG or VPM -->
                <ParameterBlock Id="%AID%_PB-nnn" Name="a%C%ChannelDelayCycle" Inline="true" Layout="Grid" ><!-- HelpContext="HMG-Verzoegerung-nach-Neustart" -->
                  <Rows>
                    <Row Id="%AID%_PB-nnn_R-1" Name="Row1" />
                  </Rows>
                  <Columns>
                    <Column Id="%AID%_PB-nnn_C-1" Name="Col1" Width="45%" />
                    <Column Id="%AID%_PB-nnn_C-2" Name="Col2" Width="15%" />
                    <Column Id="%AID%_PB-nnn_C-3" Name="Col3" Width="20%" />
                  </Columns>
                  <ParameterSeparator Id="%AID%_PS-nnn" Text="Verzögerung nach Neustart" Cell="1,1" />
                  <ParameterRefRef RefId="%AID%_UP-%TT%00003_R-%TT%0000301" Cell="1,2" />
                  <ParameterRefRef RefId="%AID%_UP-%TT%00002_R-%TT%0000201" Cell="1,3" />
                </ParameterBlock>

                <ParameterSeparator Id="%AID%_PS-nnn" Text="" UIHint="HorizontalRuler" />

                <ParameterSeparator Id="%AID%_PS-nnn" Text="CCU" UIHint="Headline" />
                <ParameterRefRef RefId="%AID%_UP-%TT%00004_R-%TT%0000401" /><!-- HelpContext="HMG-Kanalauswahl"  -->
                <ParameterRefRef RefId="%AID%_UP-%TT%00005_R-%TT%0000501" /><!-- HelpContext="HMG-Kanalauswahl"  -->

              </ParameterBlock>                            

              <!-- all channels: -->
              <!--
              -->
              <op:include href="HomematicModule.templ.xml" xpath="//Dynamic/ChannelIndependentBlock/*" type="template" prefix="HMG" IsInner="true" />

              <!-- show page for adding invisible channels -->
              <choose ParamRefId="%AID%_UP-%TT%00001_R-%TT%0000101">
                <when test="&lt;%N%">
                  <ParameterBlock Id="%AID%_PB-nnn" Name="aAdditionalChannels" Text="(mehr)" Icon="dots-horizontal"><!-- HelpContext="Empty" -->
                    <ParameterSeparator Id="%AID%_PS-nnn" Text="Kanalauswahl" UIHint="Headline" />
                    <ParameterRefRef RefId="%AID%_UP-%TT%00001_R-%TT%0000101" /><!-- HelpContext="BASE-Verfuegbare-Kanaele" IndentLevel="1" /-->
                  </ParameterBlock>
                </when>
              </choose>
            </Channel>
          </Dynamic>
        </ApplicationProgram>
      </ApplicationPrograms>
      <Baggages>
        <Baggage TargetPath="" Name="Help_de.zip" Id="%FILE-HELP-de%">
          <FileInfo TimeInfo="%DATETIME%" />
        </Baggage>
        <Baggage TargetPath="" Name="Icons.zip" Id="%FILE-ICONS%">
          <FileInfo TimeInfo="%DATETIME%" />
        </Baggage>
      </Baggages>      
    </Manufacturer>
  </ManufacturerData>
</KNX>